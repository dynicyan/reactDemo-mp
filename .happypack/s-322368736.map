{"version":3,"sources":["src/helpers/util.js"],"names":["Util","Date","prototype","Format","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","test","replace","RegExp","$1","getFullYear","substr","length","k","now","nowMonth","nowYear","_d","Array","i","Object","year","show","month","firstDay","dd","lastDay","firstday","splice","type","lastday","console","log","resolve","reject","getItem","bool","document","createElement","toDataURL","indexOf","setItem","err","guid","n","random","toString","name","result","location","hash","match","Key","value","window","sessionStorage","getCurrentLocation","pathname","reg","r","search","unescape"],"mappings":"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","file":"util.js","sourceRoot":"/Users/yandong/Downloads/mpaireact","sourcesContent":["import {browserHistory} from 'react-router';\nimport localStorage from './locallStorage';\n\nclass Util {\n    constructor() {\n        Date.prototype.Format = function (fmt) {\n            var o = {\n                \"M+\": this.getMonth() + 1, //月份   \n                \"d+\": this.getDate(), //日   \n                \"h+\": this.getHours(), //小时   \n                \"m+\": this.getMinutes(), //分   \n                \"s+\": this.getSeconds(), //秒   \n                \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度   \n                \"S\": this.getMilliseconds() //毫秒   \n            };\n            if (/(y+)/.test(fmt))\n                fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n            for (var k in o)\n                if (new RegExp(\"(\" + k + \")\").test(fmt))\n                    fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n            return fmt;\n        }\n    }\n   getThreeMonth(){\n    \t  var now = new Date();\n    \t  var nowMonth = now.getMonth()+1; // 当前月\n    \t  var nowYear = now.getFullYear(); // 当前年\n    \t  var _d=new Array;\n\t\t  for(var i=0;i<3;i++){\n\t\t\t  _d[i]=new Object();\n\t\t\t  if(nowMonth-i<=0){\n\t\t\t\t  _d[i].year=nowYear-1;\n\t\t\t\t  if(i==1){\n\t\t\t\t\t  _d[i].show=(nowYear-1)+\"-\"+(12); \n\t\t\t\t\t  _d[i].month=12;\n\t\t\t\t  }else if(i==2){\n\t\t\t\t\t  _d[i].show=(nowYear-1)+\"-\"+(11);\n\t\t\t\t\t  _d[i].month=11;\n\t\t\t\t  }\n\t\t\t  }else{\n\t\t\t\t  _d[i].show=nowYear+\"-\"+((nowMonth-i)<10?\"0\"+(nowMonth-i):(nowMonth-i));\n\t\t\t\t  _d[i].year=nowYear;\n\t\t\t\t  _d[i].month=nowMonth-i;\n\t\t\t  }\n\t\t\t  \n\t\t\t  //第一天 以及最后一天\n\t\t\t  _d[i].firstDay=\"01 00:00:00\";\n\t\t\t  var dd=new Date(_d[i].year,_d[i].month,0);\n\t\t\t  _d[i].lastDay=dd.getDate()+\" 23:59:59\";\n\t\t\t  \n\t\t  }\n\t\t   var firstday = _d[2].show+\"-\"+_d[0].firstDay;\n\t\t   var lastDay = _d[0].show+\"-\"+_d[2].lastDay;\n\t\t  _d.splice(0, 0,{show:\"全部\",type:\"all\",firstday:firstday,lastday:lastDay}); \n\t\t  console.log(_d);\n\t\t  return _d;\n      }\n    checkWebp() {\n        return new Promise(function (resolve, reject) {\n            if (localStorage.getItem('webpSupport') == true) {\n                resolve(true)\n            } else if (localStorage.getItem('webpSupport') == false) {\n                resolve(false)\n            } else {\n                try {\n                    let bool = (document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp') == 0);\n                    localStorage.setItem('webpSupport', bool)\n                    resolve(bool)\n                } catch (err) {\n                    try{\n                        localStorage.setItem('webpSupport', false)\n                    } catch(err){\n\n                    }\n\n                    resolve(false)\n                }\n            }\n        })\n    }\n\n    CalculatGUID() {\n        let guid = \"\"\n        for (let i = 1; i <= 32; i++) {\n            let n = Math.floor(Math.random() * 16.0).toString(16)\n            guid += n\n            if ((i == 8) || (i == 12) || (i == 16) || (i == 20)) {\n                guid += \"-\"\n            }\n        }\n        return guid\n    }\n\n    getQueryStringByName(name) {\n        let result = location.hash.match(new RegExp(\"[\\?\\&]\" + name + \"=([^\\&]+)\", \"i\"))\n        if (result == null || result.length < 1) {\n            return \"\"\n        }\n        return result[1]\n    }\n\n    setLocalStorageInfo(Key, value = {}) {\n        if (typeof value == 'object') {\n            value = JSON.stringify(value)\n        }\n        localStorage.setItem(Key, value)\n    }\n\n    getLocalStorageInfo(Key) {\n        return localStorage.getItem(Key)\n    }\n\n    setSessionStorageInfo(Key, value = {}) {\n        if (typeof value == 'object') {\n            value = JSON.stringify(value)\n        }\n        window.sessionStorage.setItem(Key, value)\n    }\n\n    getSessionStorageInfo(Key) {\n        return window.sessionStorage.getItem(Key)\n    }\n\n    needLogin() {\n        return !!localStorage.getItem('password') && window.sessionStorage.getItem('isLocked') != 'false'\n    }\n\n    getCurrPath() {\n        return browserHistory.getCurrentLocation().pathname.replace(/^\\//, '')\n    }\n\n    //获取url search参数\n    getQueryString(name) {\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\n        var r = window.location.search.substr(1).match(reg);\n        if (r != null)return unescape(r[2]);\n        return null;\n    }\n}\nexport default new Util()"]}